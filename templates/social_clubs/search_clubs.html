{% extends "base.html" %}
{% block title %} Social Clubs {% endblock title%}

{% block content %}
<h1 style="display: inline-block;">
    {% if query|length %}
    Search Results For: {{query}}
    {% else %}
    You Haven't Searched Anything
    {% endif %}
</h1>
<hr />
<form class="form-inline mb-4" method="GET" action="{% url 'search-clubs' %}">
  <input name="q" class="form-control form-control-lg mr-2 " type="search" placeholder="Search Clubs" {% if query %}value="{{query}}"{%endif%} aria-label="Search" required>
  <button class="btn btn-primary btn-lg mr-5" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
</form> 


{% if social_clubs %}
{% for social_club in social_clubs %}

<div class="card mb-3">
  <div class="card-body">
    
      <h5 class="card-title"><b>
        

        <a href="{% url 'club-detail' pk=social_club.pk %}">
          {{social_club.name | title }}
          </a>
  
          &nbsp;
          {% if social_club in social_clubs_attending %}
          <span class="badge badge-success"><i class="fa-solid fa-check"></i> You have joined this club.</span>
          {% endif %}
          
 
        </b></h5>
    </a>



    <hr />
    <p class="card-text"><b>Description:</b> {% if social_club.description|length > 200 %}
      {{social_club.description|slice:200}} 
      <a href="{% url 'club-detail' pk=social_club.pk %}">...</a>
       {% else %} {{social_club.description}} {% endif %}</p>
    
    <hr />
    <a href="{% url 'club-detail' pk=social_club.pk %}" class="btn btn-lg btn-primary">Details</a>
  </div>
</div>
{% endfor %}



<nav class="text-center">
  <ul class="pagination justify-content-center">

    {% if social_clubs.has_previous %}
    <li class="page-item"><a class="page-link" href="?page={{ social_clubs.previous_page_number }}">Previous</a></li>
    {% else %}
    <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
    {% endif %}



    {% for num in social_clubs.paginator.page_range %}
    {% if num == social_clubs.number %}
    <li class="page-item active">
      <a class="page-link" href="?page={{ num }}">{{ num }} <span class="sr-only">(current)</span></a>
    </li>
    {% elif num > social_clubs.number|add:-5 and num < social_clubs.number|add:5 %} <li class="page-item">
      <a class="page-link" href="?page={{ num }}">{{ num }}</a>
      </li>
      {% endif %}
      {% endfor %}



      {% if social_clubs.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ social_clubs.next_page_number }}">Next</a></li>
      {% else %}
      <li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
      {% endif %}


  </ul>
</nav>

{% else %}
No results.
{% endif %}


{% endblock content %}
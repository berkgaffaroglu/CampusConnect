{% extends "base.html" %}
{% block title %}Profile Page{% endblock title %}
{% block content %}


<h1>Profile of: {{current_profile.username}} {% if can_change %}
    <a href="{% url 'edit-profile' pk=current_profile.pk %}" class="btn btn-primary btn-lg">Edit Profile</a>
    {% endif %}
</h1>
<hr />
<div class="card">

    <div class="card-body p-5" style="min-height: 700px;">

        <div class="col-md-5">
            <img class="rounded-circle account-img mb-3" data-toggle="tooltip" data-placement="right" width="100px"
                title='Profile picture of "{{current_profile.username}}"' height="100px"
                src="{{ current_profile.profile.avatar.url }} " />
        </div>

        <hr />
        <div class="col-md-5 ">
            <label> <strong>
                <h4>Full Name:</h4>
            </strong> <label> 
            <p>{{ current_profile.first_name }} {{current_profile.last_name}}</p>
        </div>
        <hr />

        <div class="col-md-5 ">
            <label> <strong>
                <h4>Bio:</h4>
            </strong> <label> 
            <p>{{ current_profile.profile.bio }}</p>
        </div>
        <hr />
        
        {% if social_clubs|length > 0 %}
        <div class="col-md-5 ">
            <label> <strong>
                <h4>Social Clubs:</h4>
            </strong> <label> 

            {% for event in created_events %}
            <a href="{% url 'event-detail' pk=event.pk %}">{{event.title | title }}</a>
            {% endfor %}

        </div>
        <hr />
        {% endif %}

        <!-- {% if created_events|length > 0 %}
        <div class="col-md-5 ">

            <label> <strong>
                <h4>Created Events:</h4>
            </strong> <label> 
            <ul class="list-group ">
                {% for event in created_events %}
                <li class="list-group-item"><a href="{% url 'event-detail' pk=event.pk %}">{{event.title | title }}</a>
                </li>
                {% endfor %}
            </ul>
        </div>
        <hr/>
        {% endif %} -->

        <div class="col-md-5 mb-2">
            <label> <strong>
                <h4>{% if current_profile.pk == request.user.pk %}
                    Your Groups:
                    {% else %}
                    {{current_profile.username|title}}'s Groups:
                    {% endif %}</h4>
            </strong> <label> 

            {% if clubs %}
            <p>
            {% for club in clubs %}
            <a href="{% url 'club-detail' pk=club.pk %}">{{club.name|title}}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
            </p>
            {% else %}<br/>
            {{current_profile.username | title}} hasn't joined any social clubs yet.
            {%endif%}
        </div>
        
        


        <hr/>

        <div class="col-md-5 mb-2">
            <label> <strong>
                <h4>{% if current_profile.pk == request.user.pk %}
                    Your Events:
                    {% else %}
                    {{current_profile.username|title}}'s Events:
                    {% endif %}</h4>
            </strong> <label> 

            

        </div>
        <!-- This differentiation is made because we dont want to show some of the badges to the user when it is unnecessary. Like showing in a users profile
        where we already know the user is already attending. -->
        {% include 'events/events_REUSE.html' with current_users_page=True %}

    </div>
</div>


{% endblock content %}